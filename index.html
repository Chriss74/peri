<!DOCTYPE html>
<html>
<head>
<title>Test if you are a robot</title>
<meta charset="UTF-8">
<meta name="author" content="Crista">
<style>
    body{
        font-family: Tahoma, Verdana, sans-serif; 
        
    }
    h1{
        text-align: center;
    }
    h2{

        margin: auto;
        width: 30%;
        padding: 10px;
    }
    
    #captcha{
        height:160px;
        border: 3px solid black;
        margin: auto;
        width: 50%;
        padding: 10px;
    }
    #fname{
        height:50px;
        width:200px;
        font-size:large;
    }
    #chkbox{
        height:60%;
        width:60%;
    }
    #txt, #res{
        font-size: 150%;
    }
    #check{
        height: 25%;
        width: 25%
    }
   
    img{
        width:100%;
      }
</style>

</head>
<body>
    <h1>ROBOTO-TRON</h1>
    <div><h3>Το πατενταρισμένο μας ROBOTO-TRON TM μπορεί να κοιτάξει βαθειά μέσα στην ψυχή σου (αν έχεις...), με τη δύναμη προηγμένης νανοτεχνολογίας klp και θα σου πει εάν και σε ποιο ποσοστό είσαι ένας κανονικός άνθρωπος ή μία άκαρδη αλγοριθμική μηχανή χωρίς αισθήματα. Γράψε το πλήρες βαφτιστικό σου όνομα και τσέκαρε το κουτάκι παρακάτω.</h3></div><br>
    <div><h2><form name="myForm">
    <label for="fname" >Όνομα:</label>
    <input type="text" maxlength="20"id="fname" name="fname" value=""> <br> <br>
    </form></h2></div>
    <table id="captcha">
    <th id="check"> <input type="checkbox" id="chkbox"></th>
    <th id="txt"> <p >Είμαι ρομποτ?</p></th>
    <th id="img"><img  src="RecaptchaLogo.svg" alt=""></th>
    </table>
    <br><br>
    <div id="res"></div>
    <div id="photo"></div>
    

    <script>
    let chkbox=document.getElementById("chkbox") 
    chkbox.addEventListener("click", onclick)
    let photo=document.getElementById("photo")
    let res=document.getElementById("res")
    let name=document.getElementById("fname")
        
    function onclick(e){
        e.stopPropagation
        photo.innerHTML=""
        res.innerHTML="" 

        if (chkbox.checked==true){
            checked()
        }
    }
        
    function checked(){ 
        if (name.value==""){
            let errormsg=document.createTextNode("Δεν έχεις δώσει το όνομά σου")   
            res.appendChild(errormsg)   
        }else{
            let myName=fname.value.toLowerCase()
            if (myName.includes('perik') || myName.includes("περικ") || myName=="peri" || myName=="περι"){
                lang()
            }else if (myName.includes('chrys') || myName.includes("χρύσα") || myName.includes("chriso") || myName.includes("chrisa")|| myName.includes("chrissa") || myName.includes("chryssa")||myName.includes("χρυσο")) {
                crista()
            }else{
                others()
            }
        }
    }
    
    function lang(){
         let obj=[]
         let strm=""
          /** get w3c voices **/
          if ('speechSynthesis' in window) {
            let voices = speechSynthesis.getVoices();
            if (voices.length) {
              // Safari; FF caches voices after 1st load
              for (let i=0; i<voices.length;i++){
                console.log(strm+"1")
                obj.push(voices[i].lang)  
                peri(strm)
              }
            } else {
              // Opera win, Firefox 1st load, Chrome
              speechSynthesis.onvoiceschanged = () => 
              {
                voices = speechSynthesis.getVoices();
                for (let i=0; i<voices.length;i++){
                    strm=strm+voices[i].lang
                    obj.push(voices[i].lang)
                }
                peri(strm)
              } 
            
            }
        }
    }

    function peri(myVoices){
     
        const synth = window.speechSynthesis;
        var msg1 = new SpeechSynthesisUtterance()
        var msg2 = new SpeechSynthesisUtterance()
        let texten1=`Gia su robot praktora tria koma deka tesera, Tomeas planiti Gi. Fagame ton kozmo na se vroume.Na epistrepsis amesa sti vasi gia instructions.`
        let texten2=`Su stelnoume ke mia foto apo tin patrida gia na thimithis ta palia`
        let textgr1=`Γεια σου ρομπότ πράκτορα 3,14, τομέας πλανήτη Γη. Φαγαμε τον κόσμο να σε βρούμε. Να επιστρέψεις άμεσα στη βάση για οδηγίες.`
        let textgr2=`Σου στέλνουμε και μία φώτο από την πατρίδα για να θυμηθεις τα παλια`
        let textplain1=`Hello robot agent 3.14, Earth Division. We searched everywhere to find you. Return immediately to the base for instructions`
        let textplain2=`We send you a photo from our country for you to remember the good old days`


        if (myVoices.includes("de-DE")){
            msg1.lang='de-DE'
            msg2.lang='de-DE'
            msg1.text = texten1
            msg2.text = texten2
        }else if(myVoices.includes("ko-KR")){
            msg1.lang='ko-KR'
            msg2.lang='ko-KR'
            msg1.text = texten1
            msg2.text = texten2
        }else if(myVoices.includes("el-GR")){
            msg1.lang='el-GR'
            msg2.lang='el-GR'
            msg1.text = texten1           
            msg2.text = texten2
        }else {
            msg1.lang='en-US'
            msg2.lang='en-US'
            msg1.text = textplain1           
            msg2.text = textplain2
        }
        msg1.rate=1;
        msg2.rate=1
        let i=0
        msg1.onstart=(event)=>{
        let intervalId1=setInterval(function(){
            txt=msg1.text+msg2.text
            res.innerHTML+=txt[i]
            i++
            if (i==txt.length){
            clearInterval(intervalId1)
            }
        },80)
        }

        msg2.onend= (event)=>{
        let img=new Image()
        img.src="robotPeri.jpg"
        photo.appendChild(img)
        }
        synth.speak(msg1)
        synth.speak(msg2)
        synth.cancel()
    
    }

    function crista(){
        res.innerHTML="Είσαι 100% καταπληκτικός άνθρωπος"
        let img=new Image()
        img.src="Candy.jpg"
        photo.appendChild(img)
    }
    
    function others(){
        grade=Math.floor(Math.random() * 100)
        
        if (grade<25){
            res.innerHTML="Είσαι σχεδόν 100% ρομπότ. Αν σε λένε Περικλή και είσαι ο πράκτορας 3.14, επέστρεψε αμέσως στη βάση!"
        }
        else if (grade<50){
            res.innerHTML="Πιο πολύ ρομπότ παρά άνθρωπος. Αποφάσισε κι έλα να σε προσλάβουμε."
        }
        else if (grade<75){
            res.innerHTML="Καλά τα πας, μπορείς και καλύτερα..."
        }
        else{
            res.innerHTML="Είσαι ξεκάθαρα άνθρωπος.Καλή τύχη!"
        }


    }
</script>
</body>

</html>
